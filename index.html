
<!DOCTYPE html>
<html lang="en" id="html-root">
  <head>
    <!-- Language Detection Script -->
    <script>
      // Detect language from localStorage or browser preference
      const detectLanguage = () => {
        const savedLang = localStorage.getItem('i18nextLng');
        if (savedLang && (savedLang === 'zh' || savedLang === 'en')) {
          return savedLang;
        }
        
        const browserLang = navigator.language || navigator.languages[0];
        return browserLang.startsWith('zh') ? 'zh' : 'en';
      };

      // Set initial language
      const detectedLang = detectLanguage();
      document.documentElement.lang = detectedLang;
      document.documentElement.setAttribute('data-lang', detectedLang);
    </script>

    <!-- Consent Management - Silktide -->
    <script>
      // Initialize the dataLayer
      window.dataLayer = window.dataLayer || [];

      // Create the gtag function that pushes to the dataLayer
      function gtag() {
        dataLayer.push(arguments);
      }

      // Set consent defaults
      gtag('consent', 'default', {
        analytics_storage: localStorage.getItem('silktideCookieChoice_analytics') === 'true' ? 'granted' : 'denied',
        ad_storage: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
        ad_user_data: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
        ad_personalization: localStorage.getItem('silktideCookieChoice_marketing') === 'true' ? 'granted' : 'denied',
        functionality_storage: localStorage.getItem('silktideCookieChoice_necessary') === 'true' ? 'granted' : 'denied',
        security_storage: localStorage.getItem('silktideCookieChoice_necessary') === 'true' ? 'granted' : 'denied'
      });
    </script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TZ8DHWCH');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/lovable-uploads/39671993-1bb4-4bb6-8819-3ca5c07c0042.png" type="image/png" />
    
    <!-- Dynamic Meta Tags Script -->
    <script>
      // Define bilingual content
      const metaContent = {
        zh: {
          title: "伊思灵双第弹簧",
          description: "伊思灵双第弹簧: 提供符合IATF16949等国际标准的高质量解决方案。",
          author: "伊思灵双第弹簧",
          keywords: "精密弹簧,精密零部件,汽车弹簧,精密制造,质量保证,测试,全球供应链管理",
          locale: "zh_CN"
        },
        en: {
          title: "ISRI-Shuangdi Spring",
          description: "ISRI-Shuangdi Spring: Providing high-quality solutions compliant with international standards like IATF16949.",
          author: "ISRI-Shuangdi Spring",
          keywords: "precision springs,precision components,automotive springs,precision manufacturing,quality assurance,testing,global supply chain management",
          locale: "en_US"
        }
      };

      // Get current language
      const currentLang = document.documentElement.lang;
      const content = metaContent[currentLang] || metaContent.en;

      // Set document title
      document.title = content.title;

      // Function to create or update meta tag
      const setMeta = (name, content, property = false) => {
        const selector = property ? `meta[property="${name}"]` : `meta[name="${name}"]`;
        let meta = document.querySelector(selector);
        if (!meta) {
          meta = document.createElement('meta');
          if (property) {
            meta.setAttribute('property', name);
          } else {
            meta.setAttribute('name', name);
          }
          document.head.appendChild(meta);
        }
        meta.setAttribute('content', content);
      };

      // Set all meta tags
      setMeta('description', content.description);
      setMeta('author', content.author);
      setMeta('keywords', content.keywords);
      setMeta('og:title', content.title, true);
      setMeta('og:description', content.description, true);
      setMeta('og:site_name', content.author, true);
      setMeta('og:locale', content.locale, true);
      setMeta('twitter:title', content.title);
      setMeta('twitter:description', content.description);
      setMeta('pinterest:description', content.description);
    </script>

    <!-- Static Meta Tags -->
    <meta property="og:image" content="https://isri-shuangdi.com/lovable-uploads/526dc38a-25fa-40d4-b520-425b23ae0464.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:url" content="https://isri-shuangdi.com" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://isri-shuangdi.com/lovable-uploads/526dc38a-25fa-40d4-b520-425b23ae0464.png" />
    <meta name="twitter:site" content="@isringhausen" />
    <!-- LinkedIn specific -->
    <meta property="og:image:secure_url" content="https://isri-shuangdi.com/lovable-uploads/526dc38a-25fa-40d4-b520-425b23ae0464.png" />
    <!-- Pinterest specific -->
    <meta name="pinterest:image" content="https://isri-shuangdi.com/lovable-uploads/526dc38a-25fa-40d4-b520-425b23ae0464.png" />
    <link rel="canonical" href="https://isri-shuangdi.com" />
    <!-- Robots directive -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TZ8DHWCH"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div id="root"></div>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
